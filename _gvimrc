" My gvimrc file
" Author: Lee Savide <laughingman182@gmail.com>
" Set the toolbar & scrollbar settings
set guioptions+=bT
" OS-dependent options {{{
if has("gui_win32")
    setlocal lines=200 columns=200
    " Set GUI font to Courier New, so Windows knows what to do with Unicode
    " encoding and still show text in monospaced width
    setlocal guifont=Courier_New:h10:cANSI
    " To save, press ctrl-s.
    nmap <c-s> :w<CR>
    imap <c-s> <Esc>:w<CR>a
    " Set the fileformat to Windows, for <CR><LF> line endings
    setlocal fileformat=dos
else
    if has("gui_macvim")
        " Because MacVim is mean about colorscheme
        set background=dark
        colorscheme earendel
        setlocal lines=50 columns=180
        " Set windows to be slightly see-through; MacVim-only
        setlocal transparency=8
        nmap <D-s> :w<CR>
        imap <D-s> <Esc>:w<CR>
    elseif has("gui_gtk2")
        set guifont=Courier\ 10\ Pitch\ 10
        set guifontwide=Courier\ 10\ Pitch\ 10 fileformat=unix
        setlocal lines=40 columns=180
        "setlocal guifont=Ubuntu
    endif
endif
" }}}
" GuiTabLabel {{{
function GuiTabLabel()
    let label = ''
    let bufnrlist = tabpagebuflist(v:lnum)
    " Add '+' if one of the buffers in the tab page is modified
    for bufnr in bufnrlist
        if getbufvar(bufnr, '&modified')
            let label = '[+] '
            break
            break
        endif
    endfor
    " Append the number of windows in the tab page if more than one
    let wincount = tabpagewinnr(v:lnum, '$')
    if wincount > 1
        let label .= wincount
    endif
    if label != ''
        let label .= ' '
    endif
    return label
endfunction
" }}}
" See ':help setting-guitablabel'
set guitablabel=%{GuiTabLabel()}\ %t
" vim: ft=vim
